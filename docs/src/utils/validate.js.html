<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/utils/validate.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">src/utils</a> validate.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">94.59% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>35/37</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">92.41% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>73/79</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">90% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>18/20</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">97.22% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>35/36</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">20x</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-yes">26x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">11x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import moment from 'moment'
import {TOMORROW} from './constants'
&nbsp;
&nbsp;
const nameRe = new RegExp(/[\s.áéíóöőúüűÁÉÍÓÖŐÚÜŰa-zA-Z-]+/)
const emailRe = new RegExp(/[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)
const telRe = new RegExp(/^\+?[0-9-\s]+/)
const addressRe = new RegExp(/[\s.\-\,/áéíóöőúüűÁÉÍÓÖŐÚÜŰa-zA-Z0-9]+/)
&nbsp;
export const valid = {
  roomId: (roomId=0, roomsLength) =&gt; (0 &lt; roomId) &amp;&amp; (roomId &lt;= roomsLength),
  name: name =&gt; nameRe.test(name),
  email: email =&gt; emailRe.test(email),
  tel: tel =&gt; telRe.test(tel),
  address: address =&gt; typeof address === "string" &amp;&amp; addressRe.test(address),
  message: message =&gt; typeof message === "string",
  messageMin: message =&gt; typeof message === "string" &amp;&amp; message.length &gt;= 40,
  from: from =&gt; moment(from).isAfter(TOMORROW),
  to: to =&gt; moment(to).isAfter(TOMORROW.clone().add(2, "day")),
  period: (from, to) =&gt; moment.range(from, to).snapTo("day").diff("day") &gt;= 1,
  adults: adults =&gt; typeof adults === "number" &amp;&amp; adults,
  children: children =&gt;
    Array.isArray(children) &amp;&amp;
    (children.length === 0 ||
    children.every(child =&gt;
      Object.keys(child).length === 2 &amp;&amp;
        child.name &amp;&amp; child.count &amp;&amp;
        ["0-6", "6-12"].includes(child.name) &amp;&amp; child.count &gt;= 0
    )),
  peopleCount: (adults, children, maxPeople) =&gt; adults + children.reduce(<span class="fstat-no" title="function not covered" >(a</span>cc, {count}) =&gt; <span class="cstat-no" title="statement not covered" >acc+count,</span> 0) &lt;= maxPeople,
  subject: subject =&gt; ["eventHall", "fullHouse", "special", "other"].includes(subject)
}
&nbsp;
&nbsp;
export const validateReservation = ({
  roomId, roomLength, name, email, tel, address, from, to, message, adults, children, maxPeople
}) =&gt;
  !valid.roomId(roomId, roomLength) ? "Érvénytelen szobaszám" :
    !valid.name(name) ? "Érvénytelen név" :
      !valid.email(email) ? "Érvénytelen e-mail cím" :
        !valid.tel(tel) ? "Érvénytelen telefonszám" :
          !valid.address(address) ? "Érvénytelen lakcím" :
            !valid.from(from) ? "Legkorábbi érkezés holnap" :
              !valid.to(to) ? "Legkorábbi távozás holnapután" :
                !valid.period(from, to) ? "A foglalás legalább egy éjszakát kell, hogy tartalmazzon" :
                  !valid.message(message) ? "Érvénytelen üzenet" :
                    !valid.messageMin(message) ? "Túl rövid üzenet (min 40 karakter)" :
                      !valid.adults(adults) ? "Érvénytelen felnőtt" :
                        !valid.children(children) ? "Érvénytelen gyerek" :
                          !valid.peopleCount(adults, children, maxPeople) ? "A személyek száma nem haladhatja meg a szoba kapacitását" :
                            false
&nbsp;
export const validateMessage = ({
  subject, name, email, tel, content, address
}) =&gt;
  !valid.name(name) ? "Érvénytelen név" :
    !valid.subject(subject) ? "Érvénytelen téma" :
      !valid.email(email) ? "Érvénytelen e-mail cím" :
        !valid.tel(tel) ? "Érvénytelen telefonszám" :
          !valid.tel(address) ? "Érvénytelen lakcím" :
            !valid.messageMin(content) ? "Túl rövid üzenet (min 40 karakter)" :
              false
&nbsp;
&nbsp;
export const valueToState = (key, value) =&gt; {
  switch (key) {
  case "roomId":
    return parseInt(value, 10) || null
  case "adults":
    return parseInt(value, 10) || 1
  case "children":
    const ageGroups = ["0-6", "6-12"]
    return typeof value === "string" ?
      ageGroups.includes(value) ? <span class="branch-0 cbranch-no" title="branch not covered" >[value] </span>: [] :
<span class="branch-1 cbranch-no" title="branch not covered" >      value.every(<span class="fstat-no" title="function not covered" >ch</span>ild =&gt; <span class="cstat-no" title="statement not covered" >ageGroups.includes(child))</span> ? value : []</span>
  case "from":
  case "to":
    const date = moment(value, "YYYY-MM-DD", true)
    return date.isValid() ? date.toDate() : <span class="branch-1 cbranch-no" title="branch not covered" >moment().toDate()</span>
  case "foodService":
    return ["breakfast", "halfBoard"].includes(value) ? <span class="branch-0 cbranch-no" title="branch not covered" >value </span>: "breakfast"
  case "subject":
    return valid.subject(value) ? value : "other"
  default:
    return
  }
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Tue Oct 23 2018 01:09:41 GMT+0200 (CEST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
